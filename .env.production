# ========================================
# 本番環境用環境変数テンプレート
# ========================================
# 注意: 本ファイルは.gitignoreに含める
# 作成日　25/10/30

# ========================================
# バックエンド環境変数
# ========================================

# サーバー設定
API_PORT=3000
NODE_ENV=production
API_BASE_URL=https://api.example.com

# データベース設定（本番用RDS/マネージドDB）
DATABASE_URL=postgresql://prod_user:${SECURE_DB_PASSWORD}@db.example.com:5432/paypay_prod_db
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_CONNECTION_TIMEOUT=5000

# JWT 設定（本番用強力なシークレット）
JWT_SECRET=${SECURE_JWT_SECRET}
JWT_EXPIRY=24h
JWT_REFRESH_SECRET=${SECURE_JWT_REFRESH_SECRET}
JWT_REFRESH_EXPIRY=7d

# ロギング設定（本番環境では外部サービス利用推奨）
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE=/var/log/api/app.log
LOG_MAX_SIZE=100m
LOG_MAX_FILES=10
SENTRY_DSN=${SENTRY_DSN}

# セキュリティ設定
CORS_ALLOWED_ORIGINS=https://app.example.com,https://www.example.com
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
ANALYSIS_RATE_LIMIT_MAX_REQUESTS=20

# HTTPS設定
HTTPS_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem

# ========================================
# フロントエンド環境変数
# ========================================

VITE_API_URL=https://api.example.com/api
VITE_APP_NAME=PayPay Investment Helper
VITE_ENVIRONMENT=production
VITE_ANALYTICS_ID=${GA_TRACKING_ID}

# ========================================
# Python 分析エンジン環境変数
# ========================================

# サーバー設定
PYTHON_SERVICE_PORT=5000
PYTHON_ENV=production
PYTHON_SERVICE_URL=https://analysis.example.com

# 分析設定
ANALYSIS_INTERVAL=1440
BACKTEST_DAYS=365
YFINANCE_TIMEOUT=30
ANALYSIS_CACHE_TTL=3600

# テクニカル指標パラメータ
MA_PERIODS=5,20,50
RSI_PERIOD=14
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9

# ========================================
# 共通設定
# ========================================

# タイムゾーン
TZ=Asia/Tokyo

# デバッグモード（本番環境では必ずfalse）
DEBUG=false

# ========================================
# モニタリング・監視設定
# ========================================

# CloudWatch（AWS）またはDatadog
MONITORING_SERVICE=cloudwatch
CLOUDWATCH_NAMESPACE=PayPayApp
CLOUDWATCH_LOG_GROUP=/aws/paypay/api

# アラート設定
ALERT_EMAIL=${ALERT_EMAIL}
ALERT_SLACK_WEBHOOK=${SLACK_WEBHOOK_URL}

# ========================================
# バックアップ・リカバリ設定
# ========================================

# S3（AWS）またはGCS（GCP）
BACKUP_SERVICE=s3
S3_BACKUP_BUCKET=${S3_BUCKET_NAME}
S3_REGION=ap-northeast-1
BACKUP_RETENTION_DAYS=30

# ========================================
# CDN・キャッシング設定
# ========================================

REDIS_URL=redis://${REDIS_PASSWORD}@redis.example.com:6379/0
CACHE_TTL=3600
SESSION_CACHE_ENABLED=true

# ========================================
# 重要なシークレット（Vault/Secrets Manager利用推奨）
# ========================================
# 以下は環境変数で注入されるべき：
# - SECURE_DB_PASSWORD
# - SECURE_JWT_SECRET
# - SECURE_JWT_REFRESH_SECRET
# - SENTRY_DSN
# - GA_TRACKING_ID
# - ALERT_EMAIL
# - SLACK_WEBHOOK_URL
# - S3_BUCKET_NAME
# - REDIS_PASSWORD
